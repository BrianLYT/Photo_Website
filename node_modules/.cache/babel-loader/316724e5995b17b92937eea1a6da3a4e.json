{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\n\nconst RuntimeModule = require(\"../RuntimeModule\");\n\nconst Template = require(\"../Template\");\n/** @typedef {import(\"../Chunk\")} Chunk */\n\n/** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\n\n\nclass ChunkPrefetchStartupRuntimeModule extends RuntimeModule {\n  /**\n   * @param {{ onChunks: Chunk[], chunks: Set<Chunk> }[]} startupChunks chunk ids to trigger when chunks are loaded\n   */\n  constructor(startupChunks) {\n    super(\"startup prefetch\", RuntimeModule.STAGE_TRIGGER);\n    this.startupChunks = startupChunks;\n  }\n  /**\n   * @returns {string} runtime code\n   */\n\n\n  generate() {\n    const {\n      startupChunks,\n      chunk\n    } = this;\n    const {\n      runtimeTemplate\n    } = this.compilation;\n    return Template.asString(startupChunks.map(_ref => {\n      let {\n        onChunks,\n        chunks\n      } = _ref;\n      return `${RuntimeGlobals.onChunksLoaded}(0, ${JSON.stringify( // This need to include itself to delay execution after this chunk has been fully loaded\n      onChunks.filter(c => c === chunk).map(c => c.id))}, ${runtimeTemplate.basicFunction(\"\", chunks.size < 3 ? Array.from(chunks, c => `${RuntimeGlobals.prefetchChunk}(${JSON.stringify(c.id)});`) : `${JSON.stringify(Array.from(chunks, c => c.id))}.map(${RuntimeGlobals.prefetchChunk});`)}, 5);`;\n    }));\n  }\n\n}\n\nmodule.exports = ChunkPrefetchStartupRuntimeModule;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/prefetch/ChunkPrefetchStartupRuntimeModule.js"],"names":["RuntimeGlobals","require","RuntimeModule","Template","ChunkPrefetchStartupRuntimeModule","constructor","startupChunks","STAGE_TRIGGER","generate","chunk","runtimeTemplate","compilation","asString","map","onChunks","chunks","onChunksLoaded","JSON","stringify","filter","c","id","basicFunction","size","Array","from","prefetchChunk","module","exports"],"mappings":"AAAA;AACA;AACA;AAEA;;AAEA,MAAMA,cAAc,GAAGC,OAAO,CAAC,mBAAD,CAA9B;;AACA,MAAMC,aAAa,GAAGD,OAAO,CAAC,kBAAD,CAA7B;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,aAAD,CAAxB;AAEA;;AACA;;;AAEA,MAAMG,iCAAN,SAAgDF,aAAhD,CAA8D;AAC7D;AACD;AACA;AACCG,EAAAA,WAAW,CAACC,aAAD,EAAgB;AAC1B,UAAM,kBAAN,EAA0BJ,aAAa,CAACK,aAAxC;AACA,SAAKD,aAAL,GAAqBA,aAArB;AACA;AAED;AACD;AACA;;;AACCE,EAAAA,QAAQ,GAAG;AACV,UAAM;AAAEF,MAAAA,aAAF;AAAiBG,MAAAA;AAAjB,QAA2B,IAAjC;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAsB,KAAKC,WAAjC;AACA,WAAOR,QAAQ,CAACS,QAAT,CACNN,aAAa,CAACO,GAAd,CACC;AAAA,UAAC;AAAEC,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAD;AAAA,aACE,GAAEf,cAAc,CAACgB,cAAe,OAAMC,IAAI,CAACC,SAAL,EACtC;AACAJ,MAAAA,QAAQ,CAACK,MAAT,CAAgBC,CAAC,IAAIA,CAAC,KAAKX,KAA3B,EAAkCI,GAAlC,CAAsCO,CAAC,IAAIA,CAAC,CAACC,EAA7C,CAFsC,CAGrC,KAAIX,eAAe,CAACY,aAAhB,CACL,EADK,EAELP,MAAM,CAACQ,IAAP,GAAc,CAAd,GACGC,KAAK,CAACC,IAAN,CACAV,MADA,EAEAK,CAAC,IACC,GAAEpB,cAAc,CAAC0B,aAAc,IAAGT,IAAI,CAACC,SAAL,CAAeE,CAAC,CAACC,EAAjB,CAAqB,IAHzD,CADH,GAMI,GAAEJ,IAAI,CAACC,SAAL,CAAeM,KAAK,CAACC,IAAN,CAAWV,MAAX,EAAmBK,CAAC,IAAIA,CAAC,CAACC,EAA1B,CAAf,CAA8C,QACjDrB,cAAc,CAAC0B,aACd,IAVC,CAWJ,OAfH;AAAA,KADD,CADM,CAAP;AAoBA;;AAnC4D;;AAsC9DC,MAAM,CAACC,OAAP,GAAiBxB,iCAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst RuntimeModule = require(\"../RuntimeModule\");\nconst Template = require(\"../Template\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\n\nclass ChunkPrefetchStartupRuntimeModule extends RuntimeModule {\n\t/**\n\t * @param {{ onChunks: Chunk[], chunks: Set<Chunk> }[]} startupChunks chunk ids to trigger when chunks are loaded\n\t */\n\tconstructor(startupChunks) {\n\t\tsuper(\"startup prefetch\", RuntimeModule.STAGE_TRIGGER);\n\t\tthis.startupChunks = startupChunks;\n\t}\n\n\t/**\n\t * @returns {string} runtime code\n\t */\n\tgenerate() {\n\t\tconst { startupChunks, chunk } = this;\n\t\tconst { runtimeTemplate } = this.compilation;\n\t\treturn Template.asString(\n\t\t\tstartupChunks.map(\n\t\t\t\t({ onChunks, chunks }) =>\n\t\t\t\t\t`${RuntimeGlobals.onChunksLoaded}(0, ${JSON.stringify(\n\t\t\t\t\t\t// This need to include itself to delay execution after this chunk has been fully loaded\n\t\t\t\t\t\tonChunks.filter(c => c === chunk).map(c => c.id)\n\t\t\t\t\t)}, ${runtimeTemplate.basicFunction(\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\tchunks.size < 3\n\t\t\t\t\t\t\t? Array.from(\n\t\t\t\t\t\t\t\t\tchunks,\n\t\t\t\t\t\t\t\t\tc =>\n\t\t\t\t\t\t\t\t\t\t`${RuntimeGlobals.prefetchChunk}(${JSON.stringify(c.id)});`\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: `${JSON.stringify(Array.from(chunks, c => c.id))}.map(${\n\t\t\t\t\t\t\t\t\tRuntimeGlobals.prefetchChunk\n\t\t\t\t\t\t\t  });`\n\t\t\t\t\t)}, 5);`\n\t\t\t)\n\t\t);\n\t}\n}\n\nmodule.exports = ChunkPrefetchStartupRuntimeModule;\n"]},"metadata":{},"sourceType":"script"}