{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  getEntryRuntime,\n  mergeRuntimeOwned\n} = require(\"./util/runtime\");\n/** @typedef {import(\"./Compiler\")} Compiler */\n\n/** @typedef {import(\"./util/runtime\").RuntimeSpec} RuntimeSpec */\n\n\nclass FlagAllModulesAsUsedPlugin {\n  constructor(explanation) {\n    this.explanation = explanation;\n  }\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"FlagAllModulesAsUsedPlugin\", compilation => {\n      const moduleGraph = compilation.moduleGraph;\n      compilation.hooks.optimizeDependencies.tap(\"FlagAllModulesAsUsedPlugin\", modules => {\n        /** @type {RuntimeSpec} */\n        let runtime = undefined;\n\n        for (const [name, {\n          options\n        }] of compilation.entries) {\n          runtime = mergeRuntimeOwned(runtime, getEntryRuntime(compilation, name, options));\n        }\n\n        for (const module of modules) {\n          const exportsInfo = moduleGraph.getExportsInfo(module);\n          exportsInfo.setUsedInUnknownWay(runtime);\n          moduleGraph.addExtraReason(module, this.explanation);\n\n          if (module.factoryMeta === undefined) {\n            module.factoryMeta = {};\n          }\n\n          module.factoryMeta.sideEffectFree = false;\n        }\n      });\n    });\n  }\n\n}\n\nmodule.exports = FlagAllModulesAsUsedPlugin;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/FlagAllModulesAsUsedPlugin.js"],"names":["getEntryRuntime","mergeRuntimeOwned","require","FlagAllModulesAsUsedPlugin","constructor","explanation","apply","compiler","hooks","compilation","tap","moduleGraph","optimizeDependencies","modules","runtime","undefined","name","options","entries","module","exportsInfo","getExportsInfo","setUsedInUnknownWay","addExtraReason","factoryMeta","sideEffectFree","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAM;AAAEA,EAAAA,eAAF;AAAmBC,EAAAA;AAAnB,IAAyCC,OAAO,CAAC,gBAAD,CAAtD;AAEA;;AACA;;;AAEA,MAAMC,0BAAN,CAAiC;AAChCC,EAAAA,WAAW,CAACC,WAAD,EAAc;AACxB,SAAKA,WAAL,GAAmBA,WAAnB;AACA;AAED;AACD;AACA;AACA;AACA;;;AACCC,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CACC,4BADD,EAECD,WAAW,IAAI;AACd,YAAME,WAAW,GAAGF,WAAW,CAACE,WAAhC;AACAF,MAAAA,WAAW,CAACD,KAAZ,CAAkBI,oBAAlB,CAAuCF,GAAvC,CACC,4BADD,EAECG,OAAO,IAAI;AACV;AACA,YAAIC,OAAO,GAAGC,SAAd;;AACA,aAAK,MAAM,CAACC,IAAD,EAAO;AAAEC,UAAAA;AAAF,SAAP,CAAX,IAAkCR,WAAW,CAACS,OAA9C,EAAuD;AACtDJ,UAAAA,OAAO,GAAGb,iBAAiB,CAC1Ba,OAD0B,EAE1Bd,eAAe,CAACS,WAAD,EAAcO,IAAd,EAAoBC,OAApB,CAFW,CAA3B;AAIA;;AACD,aAAK,MAAME,MAAX,IAAqBN,OAArB,EAA8B;AAC7B,gBAAMO,WAAW,GAAGT,WAAW,CAACU,cAAZ,CAA2BF,MAA3B,CAApB;AACAC,UAAAA,WAAW,CAACE,mBAAZ,CAAgCR,OAAhC;AACAH,UAAAA,WAAW,CAACY,cAAZ,CAA2BJ,MAA3B,EAAmC,KAAKd,WAAxC;;AACA,cAAIc,MAAM,CAACK,WAAP,KAAuBT,SAA3B,EAAsC;AACrCI,YAAAA,MAAM,CAACK,WAAP,GAAqB,EAArB;AACA;;AACDL,UAAAA,MAAM,CAACK,WAAP,CAAmBC,cAAnB,GAAoC,KAApC;AACA;AACD,OApBF;AAsBA,KA1BF;AA4BA;;AAvC+B;;AA0CjCN,MAAM,CAACO,OAAP,GAAiBvB,0BAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { getEntryRuntime, mergeRuntimeOwned } = require(\"./util/runtime\");\n\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./util/runtime\").RuntimeSpec} RuntimeSpec */\n\nclass FlagAllModulesAsUsedPlugin {\n\tconstructor(explanation) {\n\t\tthis.explanation = explanation;\n\t}\n\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"FlagAllModulesAsUsedPlugin\",\n\t\t\tcompilation => {\n\t\t\t\tconst moduleGraph = compilation.moduleGraph;\n\t\t\t\tcompilation.hooks.optimizeDependencies.tap(\n\t\t\t\t\t\"FlagAllModulesAsUsedPlugin\",\n\t\t\t\t\tmodules => {\n\t\t\t\t\t\t/** @type {RuntimeSpec} */\n\t\t\t\t\t\tlet runtime = undefined;\n\t\t\t\t\t\tfor (const [name, { options }] of compilation.entries) {\n\t\t\t\t\t\t\truntime = mergeRuntimeOwned(\n\t\t\t\t\t\t\t\truntime,\n\t\t\t\t\t\t\t\tgetEntryRuntime(compilation, name, options)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (const module of modules) {\n\t\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n\t\t\t\t\t\t\texportsInfo.setUsedInUnknownWay(runtime);\n\t\t\t\t\t\t\tmoduleGraph.addExtraReason(module, this.explanation);\n\t\t\t\t\t\t\tif (module.factoryMeta === undefined) {\n\t\t\t\t\t\t\t\tmodule.factoryMeta = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = FlagAllModulesAsUsedPlugin;\n"]},"metadata":{},"sourceType":"script"}