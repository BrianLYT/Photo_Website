{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hash = require(\"../Hash\");\n\nconst MAX_SHORT_STRING = require(\"./wasm-hash\").MAX_SHORT_STRING;\n\nclass BatchedHash extends Hash {\n  constructor(hash) {\n    super();\n    this.string = undefined;\n    this.encoding = undefined;\n    this.hash = hash;\n  }\n  /**\n   * Update hash {@link https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding}\n   * @param {string|Buffer} data data\n   * @param {string=} inputEncoding data encoding\n   * @returns {this} updated hash\n   */\n\n\n  update(data, inputEncoding) {\n    if (this.string !== undefined) {\n      if (typeof data === \"string\" && inputEncoding === this.encoding && this.string.length + data.length < MAX_SHORT_STRING) {\n        this.string += data;\n        return this;\n      }\n\n      this.hash.update(this.string, this.encoding);\n      this.string = undefined;\n    }\n\n    if (typeof data === \"string\") {\n      if (data.length < MAX_SHORT_STRING && ( // base64 encoding is not valid since it may contain padding chars\n      !inputEncoding || !inputEncoding.startsWith(\"ba\"))) {\n        this.string = data;\n        this.encoding = inputEncoding;\n      } else {\n        this.hash.update(data, inputEncoding);\n      }\n    } else {\n      this.hash.update(data);\n    }\n\n    return this;\n  }\n  /**\n   * Calculates the digest {@link https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding}\n   * @param {string=} encoding encoding of the return value\n   * @returns {string|Buffer} digest\n   */\n\n\n  digest(encoding) {\n    if (this.string !== undefined) {\n      this.hash.update(this.string, this.encoding);\n    }\n\n    return this.hash.digest(encoding);\n  }\n\n}\n\nmodule.exports = BatchedHash;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/util/hash/BatchedHash.js"],"names":["Hash","require","MAX_SHORT_STRING","BatchedHash","constructor","hash","string","undefined","encoding","update","data","inputEncoding","length","startsWith","digest","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,SAAD,CAApB;;AACA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBC,gBAAhD;;AAEA,MAAMC,WAAN,SAA0BH,IAA1B,CAA+B;AAC9BI,EAAAA,WAAW,CAACC,IAAD,EAAO;AACjB;AACA,SAAKC,MAAL,GAAcC,SAAd;AACA,SAAKC,QAAL,GAAgBD,SAAhB;AACA,SAAKF,IAAL,GAAYA,IAAZ;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;AACCI,EAAAA,MAAM,CAACC,IAAD,EAAOC,aAAP,EAAsB;AAC3B,QAAI,KAAKL,MAAL,KAAgBC,SAApB,EAA+B;AAC9B,UACC,OAAOG,IAAP,KAAgB,QAAhB,IACAC,aAAa,KAAK,KAAKH,QADvB,IAEA,KAAKF,MAAL,CAAYM,MAAZ,GAAqBF,IAAI,CAACE,MAA1B,GAAmCV,gBAHpC,EAIE;AACD,aAAKI,MAAL,IAAeI,IAAf;AACA,eAAO,IAAP;AACA;;AACD,WAAKL,IAAL,CAAUI,MAAV,CAAiB,KAAKH,MAAtB,EAA8B,KAAKE,QAAnC;AACA,WAAKF,MAAL,GAAcC,SAAd;AACA;;AACD,QAAI,OAAOG,IAAP,KAAgB,QAApB,EAA8B;AAC7B,UACCA,IAAI,CAACE,MAAL,GAAcV,gBAAd,MACA;AACC,OAACS,aAAD,IAAkB,CAACA,aAAa,CAACE,UAAd,CAAyB,IAAzB,CAFpB,CADD,EAIE;AACD,aAAKP,MAAL,GAAcI,IAAd;AACA,aAAKF,QAAL,GAAgBG,aAAhB;AACA,OAPD,MAOO;AACN,aAAKN,IAAL,CAAUI,MAAV,CAAiBC,IAAjB,EAAuBC,aAAvB;AACA;AACD,KAXD,MAWO;AACN,WAAKN,IAAL,CAAUI,MAAV,CAAiBC,IAAjB;AACA;;AACD,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;;;AACCI,EAAAA,MAAM,CAACN,QAAD,EAAW;AAChB,QAAI,KAAKF,MAAL,KAAgBC,SAApB,EAA+B;AAC9B,WAAKF,IAAL,CAAUI,MAAV,CAAiB,KAAKH,MAAtB,EAA8B,KAAKE,QAAnC;AACA;;AACD,WAAO,KAAKH,IAAL,CAAUS,MAAV,CAAiBN,QAAjB,CAAP;AACA;;AAtD6B;;AAyD/BO,MAAM,CAACC,OAAP,GAAiBb,WAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst Hash = require(\"../Hash\");\nconst MAX_SHORT_STRING = require(\"./wasm-hash\").MAX_SHORT_STRING;\n\nclass BatchedHash extends Hash {\n\tconstructor(hash) {\n\t\tsuper();\n\t\tthis.string = undefined;\n\t\tthis.encoding = undefined;\n\t\tthis.hash = hash;\n\t}\n\n\t/**\n\t * Update hash {@link https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding}\n\t * @param {string|Buffer} data data\n\t * @param {string=} inputEncoding data encoding\n\t * @returns {this} updated hash\n\t */\n\tupdate(data, inputEncoding) {\n\t\tif (this.string !== undefined) {\n\t\t\tif (\n\t\t\t\ttypeof data === \"string\" &&\n\t\t\t\tinputEncoding === this.encoding &&\n\t\t\t\tthis.string.length + data.length < MAX_SHORT_STRING\n\t\t\t) {\n\t\t\t\tthis.string += data;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.hash.update(this.string, this.encoding);\n\t\t\tthis.string = undefined;\n\t\t}\n\t\tif (typeof data === \"string\") {\n\t\t\tif (\n\t\t\t\tdata.length < MAX_SHORT_STRING &&\n\t\t\t\t// base64 encoding is not valid since it may contain padding chars\n\t\t\t\t(!inputEncoding || !inputEncoding.startsWith(\"ba\"))\n\t\t\t) {\n\t\t\t\tthis.string = data;\n\t\t\t\tthis.encoding = inputEncoding;\n\t\t\t} else {\n\t\t\t\tthis.hash.update(data, inputEncoding);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hash.update(data);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Calculates the digest {@link https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding}\n\t * @param {string=} encoding encoding of the return value\n\t * @returns {string|Buffer} digest\n\t */\n\tdigest(encoding) {\n\t\tif (this.string !== undefined) {\n\t\t\tthis.hash.update(this.string, this.encoding);\n\t\t}\n\t\treturn this.hash.digest(encoding);\n\t}\n}\n\nmodule.exports = BatchedHash;\n"]},"metadata":{},"sourceType":"script"}