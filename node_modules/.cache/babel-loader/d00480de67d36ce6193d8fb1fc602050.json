{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\n\nconst DirectoryWatcher = require(\"./DirectoryWatcher\");\n\nclass WatcherManager {\n  constructor(options) {\n    this.options = options;\n    this.directoryWatchers = new Map();\n  }\n\n  getDirectoryWatcher(directory) {\n    const watcher = this.directoryWatchers.get(directory);\n\n    if (watcher === undefined) {\n      const newWatcher = new DirectoryWatcher(this, directory, this.options);\n      this.directoryWatchers.set(directory, newWatcher);\n      newWatcher.on(\"closed\", () => {\n        this.directoryWatchers.delete(directory);\n      });\n      return newWatcher;\n    }\n\n    return watcher;\n  }\n\n  watchFile(p, startTime) {\n    const directory = path.dirname(p);\n    if (directory === p) return null;\n    return this.getDirectoryWatcher(directory).watch(p, startTime);\n  }\n\n  watchDirectory(directory, startTime) {\n    return this.getDirectoryWatcher(directory).watch(directory, startTime);\n  }\n\n}\n\nconst watcherManagers = new WeakMap();\n/**\n * @param {object} options options\n * @returns {WatcherManager} the watcher manager\n */\n\nmodule.exports = options => {\n  const watcherManager = watcherManagers.get(options);\n  if (watcherManager !== undefined) return watcherManager;\n  const newWatcherManager = new WatcherManager(options);\n  watcherManagers.set(options, newWatcherManager);\n  return newWatcherManager;\n};\n\nmodule.exports.WatcherManager = WatcherManager;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/watchpack/lib/getWatcherManager.js"],"names":["path","require","DirectoryWatcher","WatcherManager","constructor","options","directoryWatchers","Map","getDirectoryWatcher","directory","watcher","get","undefined","newWatcher","set","on","delete","watchFile","p","startTime","dirname","watch","watchDirectory","watcherManagers","WeakMap","module","exports","watcherManager","newWatcherManager"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,oBAAD,CAAhC;;AAEA,MAAME,cAAN,CAAqB;AACpBC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACpB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,iBAAL,GAAyB,IAAIC,GAAJ,EAAzB;AACA;;AAEDC,EAAAA,mBAAmB,CAACC,SAAD,EAAY;AAC9B,UAAMC,OAAO,GAAG,KAAKJ,iBAAL,CAAuBK,GAAvB,CAA2BF,SAA3B,CAAhB;;AACA,QAAIC,OAAO,KAAKE,SAAhB,EAA2B;AAC1B,YAAMC,UAAU,GAAG,IAAIX,gBAAJ,CAAqB,IAArB,EAA2BO,SAA3B,EAAsC,KAAKJ,OAA3C,CAAnB;AACA,WAAKC,iBAAL,CAAuBQ,GAAvB,CAA2BL,SAA3B,EAAsCI,UAAtC;AACAA,MAAAA,UAAU,CAACE,EAAX,CAAc,QAAd,EAAwB,MAAM;AAC7B,aAAKT,iBAAL,CAAuBU,MAAvB,CAA8BP,SAA9B;AACA,OAFD;AAGA,aAAOI,UAAP;AACA;;AACD,WAAOH,OAAP;AACA;;AAEDO,EAAAA,SAAS,CAACC,CAAD,EAAIC,SAAJ,EAAe;AACvB,UAAMV,SAAS,GAAGT,IAAI,CAACoB,OAAL,CAAaF,CAAb,CAAlB;AACA,QAAIT,SAAS,KAAKS,CAAlB,EAAqB,OAAO,IAAP;AACrB,WAAO,KAAKV,mBAAL,CAAyBC,SAAzB,EAAoCY,KAApC,CAA0CH,CAA1C,EAA6CC,SAA7C,CAAP;AACA;;AAEDG,EAAAA,cAAc,CAACb,SAAD,EAAYU,SAAZ,EAAuB;AACpC,WAAO,KAAKX,mBAAL,CAAyBC,SAAzB,EAAoCY,KAApC,CAA0CZ,SAA1C,EAAqDU,SAArD,CAAP;AACA;;AA3BmB;;AA8BrB,MAAMI,eAAe,GAAG,IAAIC,OAAJ,EAAxB;AACA;AACA;AACA;AACA;;AACAC,MAAM,CAACC,OAAP,GAAiBrB,OAAO,IAAI;AAC3B,QAAMsB,cAAc,GAAGJ,eAAe,CAACZ,GAAhB,CAAoBN,OAApB,CAAvB;AACA,MAAIsB,cAAc,KAAKf,SAAvB,EAAkC,OAAOe,cAAP;AAClC,QAAMC,iBAAiB,GAAG,IAAIzB,cAAJ,CAAmBE,OAAnB,CAA1B;AACAkB,EAAAA,eAAe,CAACT,GAAhB,CAAoBT,OAApB,EAA6BuB,iBAA7B;AACA,SAAOA,iBAAP;AACA,CAND;;AAOAH,MAAM,CAACC,OAAP,CAAevB,cAAf,GAAgCA,cAAhC","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\nconst DirectoryWatcher = require(\"./DirectoryWatcher\");\n\nclass WatcherManager {\n\tconstructor(options) {\n\t\tthis.options = options;\n\t\tthis.directoryWatchers = new Map();\n\t}\n\n\tgetDirectoryWatcher(directory) {\n\t\tconst watcher = this.directoryWatchers.get(directory);\n\t\tif (watcher === undefined) {\n\t\t\tconst newWatcher = new DirectoryWatcher(this, directory, this.options);\n\t\t\tthis.directoryWatchers.set(directory, newWatcher);\n\t\t\tnewWatcher.on(\"closed\", () => {\n\t\t\t\tthis.directoryWatchers.delete(directory);\n\t\t\t});\n\t\t\treturn newWatcher;\n\t\t}\n\t\treturn watcher;\n\t}\n\n\twatchFile(p, startTime) {\n\t\tconst directory = path.dirname(p);\n\t\tif (directory === p) return null;\n\t\treturn this.getDirectoryWatcher(directory).watch(p, startTime);\n\t}\n\n\twatchDirectory(directory, startTime) {\n\t\treturn this.getDirectoryWatcher(directory).watch(directory, startTime);\n\t}\n}\n\nconst watcherManagers = new WeakMap();\n/**\n * @param {object} options options\n * @returns {WatcherManager} the watcher manager\n */\nmodule.exports = options => {\n\tconst watcherManager = watcherManagers.get(options);\n\tif (watcherManager !== undefined) return watcherManager;\n\tconst newWatcherManager = new WatcherManager(options);\n\twatcherManagers.set(options, newWatcherManager);\n\treturn newWatcherManager;\n};\nmodule.exports.WatcherManager = WatcherManager;\n"]},"metadata":{},"sourceType":"script"}