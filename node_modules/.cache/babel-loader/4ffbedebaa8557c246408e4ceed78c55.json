{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  cachedSetProperty\n} = require(\"../util/cleverMerge\");\n\nconst ContextElementDependency = require(\"./ContextElementDependency\");\n\nconst RequireContextDependency = require(\"./RequireContextDependency\");\n\nconst RequireContextDependencyParserPlugin = require(\"./RequireContextDependencyParserPlugin\");\n/** @typedef {import(\"../../declarations/WebpackOptions\").ResolveOptions} ResolveOptions */\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/** @type {ResolveOptions} */\n\n\nconst EMPTY_RESOLVE_OPTIONS = {};\n\nclass RequireContextPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"RequireContextPlugin\", (compilation, _ref) => {\n      let {\n        contextModuleFactory,\n        normalModuleFactory\n      } = _ref;\n      compilation.dependencyFactories.set(RequireContextDependency, contextModuleFactory);\n      compilation.dependencyTemplates.set(RequireContextDependency, new RequireContextDependency.Template());\n      compilation.dependencyFactories.set(ContextElementDependency, normalModuleFactory);\n\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.requireContext !== undefined && !parserOptions.requireContext) return;\n        new RequireContextDependencyParserPlugin().apply(parser);\n      };\n\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"RequireContextPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"RequireContextPlugin\", handler);\n      contextModuleFactory.hooks.alternativeRequests.tap(\"RequireContextPlugin\", (items, options) => {\n        if (items.length === 0) return items;\n        const finalResolveOptions = compiler.resolverFactory.get(\"normal\", cachedSetProperty(options.resolveOptions || EMPTY_RESOLVE_OPTIONS, \"dependencyType\", options.category)).options;\n        let newItems;\n\n        if (!finalResolveOptions.fullySpecified) {\n          newItems = [];\n\n          for (const item of items) {\n            const {\n              request,\n              context\n            } = item;\n\n            for (const ext of finalResolveOptions.extensions) {\n              if (request.endsWith(ext)) {\n                newItems.push({\n                  context,\n                  request: request.slice(0, -ext.length)\n                });\n              }\n            }\n\n            if (!finalResolveOptions.enforceExtension) {\n              newItems.push(item);\n            }\n          }\n\n          items = newItems;\n          newItems = [];\n\n          for (const obj of items) {\n            const {\n              request,\n              context\n            } = obj;\n\n            for (const mainFile of finalResolveOptions.mainFiles) {\n              if (request.endsWith(`/${mainFile}`)) {\n                newItems.push({\n                  context,\n                  request: request.slice(0, -mainFile.length)\n                });\n                newItems.push({\n                  context,\n                  request: request.slice(0, -mainFile.length - 1)\n                });\n              }\n            }\n\n            newItems.push(obj);\n          }\n\n          items = newItems;\n        }\n\n        newItems = [];\n\n        for (const item of items) {\n          let hideOriginal = false;\n\n          for (const modulesItems of finalResolveOptions.modules) {\n            if (Array.isArray(modulesItems)) {\n              for (const dir of modulesItems) {\n                if (item.request.startsWith(`./${dir}/`)) {\n                  newItems.push({\n                    context: item.context,\n                    request: item.request.slice(dir.length + 3)\n                  });\n                  hideOriginal = true;\n                }\n              }\n            } else {\n              const dir = modulesItems.replace(/\\\\/g, \"/\");\n              const fullPath = item.context.replace(/\\\\/g, \"/\") + item.request.slice(1);\n\n              if (fullPath.startsWith(dir)) {\n                newItems.push({\n                  context: item.context,\n                  request: fullPath.slice(dir.length + 1)\n                });\n              }\n            }\n          }\n\n          if (!hideOriginal) {\n            newItems.push(item);\n          }\n        }\n\n        return newItems;\n      });\n    });\n  }\n\n}\n\nmodule.exports = RequireContextPlugin;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/dependencies/RequireContextPlugin.js"],"names":["cachedSetProperty","require","ContextElementDependency","RequireContextDependency","RequireContextDependencyParserPlugin","EMPTY_RESOLVE_OPTIONS","RequireContextPlugin","apply","compiler","hooks","compilation","tap","contextModuleFactory","normalModuleFactory","dependencyFactories","set","dependencyTemplates","Template","handler","parser","parserOptions","requireContext","undefined","for","alternativeRequests","items","options","length","finalResolveOptions","resolverFactory","get","resolveOptions","category","newItems","fullySpecified","item","request","context","ext","extensions","endsWith","push","slice","enforceExtension","obj","mainFile","mainFiles","hideOriginal","modulesItems","modules","Array","isArray","dir","startsWith","replace","fullPath","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { cachedSetProperty } = require(\"../util/cleverMerge\");\nconst ContextElementDependency = require(\"./ContextElementDependency\");\nconst RequireContextDependency = require(\"./RequireContextDependency\");\nconst RequireContextDependencyParserPlugin = require(\"./RequireContextDependencyParserPlugin\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").ResolveOptions} ResolveOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/** @type {ResolveOptions} */\nconst EMPTY_RESOLVE_OPTIONS = {};\n\nclass RequireContextPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"RequireContextPlugin\",\n\t\t\t(compilation, { contextModuleFactory, normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tRequireContextDependency,\n\t\t\t\t\tcontextModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tRequireContextDependency,\n\t\t\t\t\tnew RequireContextDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tContextElementDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tparserOptions.requireContext !== undefined &&\n\t\t\t\t\t\t!parserOptions.requireContext\n\t\t\t\t\t)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tnew RequireContextDependencyParserPlugin().apply(parser);\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"RequireContextPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"RequireContextPlugin\", handler);\n\n\t\t\t\tcontextModuleFactory.hooks.alternativeRequests.tap(\n\t\t\t\t\t\"RequireContextPlugin\",\n\t\t\t\t\t(items, options) => {\n\t\t\t\t\t\tif (items.length === 0) return items;\n\n\t\t\t\t\t\tconst finalResolveOptions = compiler.resolverFactory.get(\n\t\t\t\t\t\t\t\"normal\",\n\t\t\t\t\t\t\tcachedSetProperty(\n\t\t\t\t\t\t\t\toptions.resolveOptions || EMPTY_RESOLVE_OPTIONS,\n\t\t\t\t\t\t\t\t\"dependencyType\",\n\t\t\t\t\t\t\t\toptions.category\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t).options;\n\n\t\t\t\t\t\tlet newItems;\n\t\t\t\t\t\tif (!finalResolveOptions.fullySpecified) {\n\t\t\t\t\t\t\tnewItems = [];\n\t\t\t\t\t\t\tfor (const item of items) {\n\t\t\t\t\t\t\t\tconst { request, context } = item;\n\t\t\t\t\t\t\t\tfor (const ext of finalResolveOptions.extensions) {\n\t\t\t\t\t\t\t\t\tif (request.endsWith(ext)) {\n\t\t\t\t\t\t\t\t\t\tnewItems.push({\n\t\t\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\t\t\trequest: request.slice(0, -ext.length)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!finalResolveOptions.enforceExtension) {\n\t\t\t\t\t\t\t\t\tnewItems.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titems = newItems;\n\n\t\t\t\t\t\t\tnewItems = [];\n\t\t\t\t\t\t\tfor (const obj of items) {\n\t\t\t\t\t\t\t\tconst { request, context } = obj;\n\t\t\t\t\t\t\t\tfor (const mainFile of finalResolveOptions.mainFiles) {\n\t\t\t\t\t\t\t\t\tif (request.endsWith(`/${mainFile}`)) {\n\t\t\t\t\t\t\t\t\t\tnewItems.push({\n\t\t\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\t\t\trequest: request.slice(0, -mainFile.length)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tnewItems.push({\n\t\t\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\t\t\trequest: request.slice(0, -mainFile.length - 1)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnewItems.push(obj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titems = newItems;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewItems = [];\n\t\t\t\t\t\tfor (const item of items) {\n\t\t\t\t\t\t\tlet hideOriginal = false;\n\t\t\t\t\t\t\tfor (const modulesItems of finalResolveOptions.modules) {\n\t\t\t\t\t\t\t\tif (Array.isArray(modulesItems)) {\n\t\t\t\t\t\t\t\t\tfor (const dir of modulesItems) {\n\t\t\t\t\t\t\t\t\t\tif (item.request.startsWith(`./${dir}/`)) {\n\t\t\t\t\t\t\t\t\t\t\tnewItems.push({\n\t\t\t\t\t\t\t\t\t\t\t\tcontext: item.context,\n\t\t\t\t\t\t\t\t\t\t\t\trequest: item.request.slice(dir.length + 3)\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\thideOriginal = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconst dir = modulesItems.replace(/\\\\/g, \"/\");\n\t\t\t\t\t\t\t\t\tconst fullPath =\n\t\t\t\t\t\t\t\t\t\titem.context.replace(/\\\\/g, \"/\") + item.request.slice(1);\n\t\t\t\t\t\t\t\t\tif (fullPath.startsWith(dir)) {\n\t\t\t\t\t\t\t\t\t\tnewItems.push({\n\t\t\t\t\t\t\t\t\t\t\tcontext: item.context,\n\t\t\t\t\t\t\t\t\t\t\trequest: fullPath.slice(dir.length + 1)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!hideOriginal) {\n\t\t\t\t\t\t\t\tnewItems.push(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn newItems;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n}\nmodule.exports = RequireContextPlugin;\n"]},"metadata":{},"sourceType":"script"}