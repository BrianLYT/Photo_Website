{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  STAGE_BASIC,\n  STAGE_ADVANCED\n} = require(\"../OptimizationStages\");\n/** @typedef {import(\"../Chunk\")} Chunk */\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n\nclass RemoveEmptyChunksPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"RemoveEmptyChunksPlugin\", compilation => {\n      /**\n       * @param {Iterable<Chunk>} chunks the chunks array\n       * @returns {void}\n       */\n      const handler = chunks => {\n        const chunkGraph = compilation.chunkGraph;\n\n        for (const chunk of chunks) {\n          if (chunkGraph.getNumberOfChunkModules(chunk) === 0 && !chunk.hasRuntime() && chunkGraph.getNumberOfEntryModules(chunk) === 0) {\n            compilation.chunkGraph.disconnectChunk(chunk);\n            compilation.chunks.delete(chunk);\n          }\n        }\n      }; // TODO do it once\n\n\n      compilation.hooks.optimizeChunks.tap({\n        name: \"RemoveEmptyChunksPlugin\",\n        stage: STAGE_BASIC\n      }, handler);\n      compilation.hooks.optimizeChunks.tap({\n        name: \"RemoveEmptyChunksPlugin\",\n        stage: STAGE_ADVANCED\n      }, handler);\n    });\n  }\n\n}\n\nmodule.exports = RemoveEmptyChunksPlugin;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/optimize/RemoveEmptyChunksPlugin.js"],"names":["STAGE_BASIC","STAGE_ADVANCED","require","RemoveEmptyChunksPlugin","apply","compiler","hooks","compilation","tap","handler","chunks","chunkGraph","chunk","getNumberOfChunkModules","hasRuntime","getNumberOfEntryModules","disconnectChunk","delete","optimizeChunks","name","stage","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAM;AAAEA,EAAAA,WAAF;AAAeC,EAAAA;AAAf,IAAkCC,OAAO,CAAC,uBAAD,CAA/C;AAEA;;AACA;;;AAEA,MAAMC,uBAAN,CAA8B;AAC7B;AACD;AACA;AACA;AACA;AACCC,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,yBAA/B,EAA0DD,WAAW,IAAI;AACxE;AACH;AACA;AACA;AACG,YAAME,OAAO,GAAGC,MAAM,IAAI;AACzB,cAAMC,UAAU,GAAGJ,WAAW,CAACI,UAA/B;;AACA,aAAK,MAAMC,KAAX,IAAoBF,MAApB,EAA4B;AAC3B,cACCC,UAAU,CAACE,uBAAX,CAAmCD,KAAnC,MAA8C,CAA9C,IACA,CAACA,KAAK,CAACE,UAAN,EADD,IAEAH,UAAU,CAACI,uBAAX,CAAmCH,KAAnC,MAA8C,CAH/C,EAIE;AACDL,YAAAA,WAAW,CAACI,UAAZ,CAAuBK,eAAvB,CAAuCJ,KAAvC;AACAL,YAAAA,WAAW,CAACG,MAAZ,CAAmBO,MAAnB,CAA0BL,KAA1B;AACA;AACD;AACD,OAZD,CALwE,CAmBxE;;;AACAL,MAAAA,WAAW,CAACD,KAAZ,CAAkBY,cAAlB,CAAiCV,GAAjC,CACC;AACCW,QAAAA,IAAI,EAAE,yBADP;AAECC,QAAAA,KAAK,EAAEpB;AAFR,OADD,EAKCS,OALD;AAOAF,MAAAA,WAAW,CAACD,KAAZ,CAAkBY,cAAlB,CAAiCV,GAAjC,CACC;AACCW,QAAAA,IAAI,EAAE,yBADP;AAECC,QAAAA,KAAK,EAAEnB;AAFR,OADD,EAKCQ,OALD;AAOA,KAlCD;AAmCA;;AA1C4B;;AA4C9BY,MAAM,CAACC,OAAP,GAAiBnB,uBAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { STAGE_BASIC, STAGE_ADVANCED } = require(\"../OptimizationStages\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\nclass RemoveEmptyChunksPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\"RemoveEmptyChunksPlugin\", compilation => {\n\t\t\t/**\n\t\t\t * @param {Iterable<Chunk>} chunks the chunks array\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tconst handler = chunks => {\n\t\t\t\tconst chunkGraph = compilation.chunkGraph;\n\t\t\t\tfor (const chunk of chunks) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tchunkGraph.getNumberOfChunkModules(chunk) === 0 &&\n\t\t\t\t\t\t!chunk.hasRuntime() &&\n\t\t\t\t\t\tchunkGraph.getNumberOfEntryModules(chunk) === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tcompilation.chunkGraph.disconnectChunk(chunk);\n\t\t\t\t\t\tcompilation.chunks.delete(chunk);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// TODO do it once\n\t\t\tcompilation.hooks.optimizeChunks.tap(\n\t\t\t\t{\n\t\t\t\t\tname: \"RemoveEmptyChunksPlugin\",\n\t\t\t\t\tstage: STAGE_BASIC\n\t\t\t\t},\n\t\t\t\thandler\n\t\t\t);\n\t\t\tcompilation.hooks.optimizeChunks.tap(\n\t\t\t\t{\n\t\t\t\t\tname: \"RemoveEmptyChunksPlugin\",\n\t\t\t\t\tstage: STAGE_ADVANCED\n\t\t\t\t},\n\t\t\t\thandler\n\t\t\t);\n\t\t});\n\t}\n}\nmodule.exports = RemoveEmptyChunksPlugin;\n"]},"metadata":{},"sourceType":"script"}