{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  URL,\n  fileURLToPath\n} = require(\"url\");\n\nconst {\n  NormalModule\n} = require(\"..\");\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n\nclass FileUriPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"FileUriPlugin\", (compilation, _ref) => {\n      let {\n        normalModuleFactory\n      } = _ref;\n      normalModuleFactory.hooks.resolveForScheme.for(\"file\").tap(\"FileUriPlugin\", resourceData => {\n        const url = new URL(resourceData.resource);\n        const path = fileURLToPath(url);\n        const query = url.search;\n        const fragment = url.hash;\n        resourceData.path = path;\n        resourceData.query = query;\n        resourceData.fragment = fragment;\n        resourceData.resource = path + query + fragment;\n        return true;\n      });\n      const hooks = NormalModule.getCompilationHooks(compilation);\n      hooks.readResource.for(undefined).tapAsync(\"FileUriPlugin\", (loaderContext, callback) => {\n        const {\n          resourcePath\n        } = loaderContext;\n        loaderContext.addDependency(resourcePath);\n        loaderContext.fs.readFile(resourcePath, callback);\n      });\n    });\n  }\n\n}\n\nmodule.exports = FileUriPlugin;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/schemes/FileUriPlugin.js"],"names":["URL","fileURLToPath","require","NormalModule","FileUriPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","resolveForScheme","for","resourceData","url","resource","path","query","search","fragment","hash","getCompilationHooks","readResource","undefined","tapAsync","loaderContext","callback","resourcePath","addDependency","fs","readFile","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAM;AAAEA,EAAAA,GAAF;AAAOC,EAAAA;AAAP,IAAyBC,OAAO,CAAC,KAAD,CAAtC;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAmBD,OAAO,CAAC,IAAD,CAAhC;AAEA;;;AAEA,MAAME,aAAN,CAAoB;AACnB;AACD;AACA;AACA;AACA;AACCC,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CACC,eADD,EAEC,CAACD,WAAD,WAA0C;AAAA,UAA5B;AAAEE,QAAAA;AAAF,OAA4B;AACzCA,MAAAA,mBAAmB,CAACH,KAApB,CAA0BI,gBAA1B,CACEC,GADF,CACM,MADN,EAEEH,GAFF,CAEM,eAFN,EAEuBI,YAAY,IAAI;AACrC,cAAMC,GAAG,GAAG,IAAId,GAAJ,CAAQa,YAAY,CAACE,QAArB,CAAZ;AACA,cAAMC,IAAI,GAAGf,aAAa,CAACa,GAAD,CAA1B;AACA,cAAMG,KAAK,GAAGH,GAAG,CAACI,MAAlB;AACA,cAAMC,QAAQ,GAAGL,GAAG,CAACM,IAArB;AACAP,QAAAA,YAAY,CAACG,IAAb,GAAoBA,IAApB;AACAH,QAAAA,YAAY,CAACI,KAAb,GAAqBA,KAArB;AACAJ,QAAAA,YAAY,CAACM,QAAb,GAAwBA,QAAxB;AACAN,QAAAA,YAAY,CAACE,QAAb,GAAwBC,IAAI,GAAGC,KAAP,GAAeE,QAAvC;AACA,eAAO,IAAP;AACA,OAZF;AAaA,YAAMZ,KAAK,GAAGJ,YAAY,CAACkB,mBAAb,CAAiCb,WAAjC,CAAd;AACAD,MAAAA,KAAK,CAACe,YAAN,CACEV,GADF,CACMW,SADN,EAEEC,QAFF,CAEW,eAFX,EAE4B,CAACC,aAAD,EAAgBC,QAAhB,KAA6B;AACvD,cAAM;AAAEC,UAAAA;AAAF,YAAmBF,aAAzB;AACAA,QAAAA,aAAa,CAACG,aAAd,CAA4BD,YAA5B;AACAF,QAAAA,aAAa,CAACI,EAAd,CAAiBC,QAAjB,CAA0BH,YAA1B,EAAwCD,QAAxC;AACA,OANF;AAOA,KAxBF;AA0BA;;AAjCkB;;AAoCpBK,MAAM,CAACC,OAAP,GAAiB5B,aAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { URL, fileURLToPath } = require(\"url\");\nconst { NormalModule } = require(\"..\");\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\nclass FileUriPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"FileUriPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tnormalModuleFactory.hooks.resolveForScheme\n\t\t\t\t\t.for(\"file\")\n\t\t\t\t\t.tap(\"FileUriPlugin\", resourceData => {\n\t\t\t\t\t\tconst url = new URL(resourceData.resource);\n\t\t\t\t\t\tconst path = fileURLToPath(url);\n\t\t\t\t\t\tconst query = url.search;\n\t\t\t\t\t\tconst fragment = url.hash;\n\t\t\t\t\t\tresourceData.path = path;\n\t\t\t\t\t\tresourceData.query = query;\n\t\t\t\t\t\tresourceData.fragment = fragment;\n\t\t\t\t\t\tresourceData.resource = path + query + fragment;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\tconst hooks = NormalModule.getCompilationHooks(compilation);\n\t\t\t\thooks.readResource\n\t\t\t\t\t.for(undefined)\n\t\t\t\t\t.tapAsync(\"FileUriPlugin\", (loaderContext, callback) => {\n\t\t\t\t\t\tconst { resourcePath } = loaderContext;\n\t\t\t\t\t\tloaderContext.addDependency(resourcePath);\n\t\t\t\t\t\tloaderContext.fs.readFile(resourcePath, callback);\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = FileUriPlugin;\n"]},"metadata":{},"sourceType":"script"}