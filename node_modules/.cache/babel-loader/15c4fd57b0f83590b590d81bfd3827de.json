{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst RuntimeGlobals = require(\"./RuntimeGlobals\");\n\nconst WebpackError = require(\"./WebpackError\");\n\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\n\nconst BasicEvaluatedExpression = require(\"./javascript/BasicEvaluatedExpression\");\n\nconst {\n  toConstantDependency,\n  evaluateToString\n} = require(\"./javascript/JavascriptParserHelpers\");\n\nconst ChunkNameRuntimeModule = require(\"./runtime/ChunkNameRuntimeModule\");\n\nconst GetFullHashRuntimeModule = require(\"./runtime/GetFullHashRuntimeModule\");\n/** @typedef {import(\"./Compiler\")} Compiler */\n\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n\n/* eslint-disable camelcase */\n\n\nconst REPLACEMENTS = {\n  __webpack_require__: {\n    expr: RuntimeGlobals.require,\n    req: [RuntimeGlobals.require],\n    type: \"function\",\n    assign: false\n  },\n  __webpack_public_path__: {\n    expr: RuntimeGlobals.publicPath,\n    req: [RuntimeGlobals.publicPath],\n    type: \"string\",\n    assign: true\n  },\n  __webpack_base_uri__: {\n    expr: RuntimeGlobals.baseURI,\n    req: [RuntimeGlobals.baseURI],\n    type: \"string\",\n    assign: true\n  },\n  __webpack_modules__: {\n    expr: RuntimeGlobals.moduleFactories,\n    req: [RuntimeGlobals.moduleFactories],\n    type: \"object\",\n    assign: false\n  },\n  __webpack_chunk_load__: {\n    expr: RuntimeGlobals.ensureChunk,\n    req: [RuntimeGlobals.ensureChunk],\n    type: \"function\",\n    assign: true\n  },\n  __non_webpack_require__: {\n    expr: \"require\",\n    req: null,\n    type: undefined,\n    // type is not known, depends on environment\n    assign: true\n  },\n  __webpack_nonce__: {\n    expr: RuntimeGlobals.scriptNonce,\n    req: [RuntimeGlobals.scriptNonce],\n    type: \"string\",\n    assign: true\n  },\n  __webpack_hash__: {\n    expr: `${RuntimeGlobals.getFullHash}()`,\n    req: [RuntimeGlobals.getFullHash],\n    type: \"string\",\n    assign: false\n  },\n  __webpack_chunkname__: {\n    expr: RuntimeGlobals.chunkName,\n    req: [RuntimeGlobals.chunkName],\n    type: \"string\",\n    assign: false\n  },\n  __webpack_get_script_filename__: {\n    expr: RuntimeGlobals.getChunkScriptFilename,\n    req: [RuntimeGlobals.getChunkScriptFilename],\n    type: \"function\",\n    assign: true\n  },\n  __webpack_runtime_id__: {\n    expr: RuntimeGlobals.runtimeId,\n    req: [RuntimeGlobals.runtimeId],\n    assign: false\n  },\n  \"require.onError\": {\n    expr: RuntimeGlobals.uncaughtErrorHandler,\n    req: [RuntimeGlobals.uncaughtErrorHandler],\n    type: undefined,\n    // type is not known, could be function or undefined\n    assign: true // is never a pattern\n\n  },\n  __system_context__: {\n    expr: RuntimeGlobals.systemContext,\n    req: [RuntimeGlobals.systemContext],\n    type: \"object\",\n    assign: false\n  },\n  __webpack_share_scopes__: {\n    expr: RuntimeGlobals.shareScopeMap,\n    req: [RuntimeGlobals.shareScopeMap],\n    type: \"object\",\n    assign: false\n  },\n  __webpack_init_sharing__: {\n    expr: RuntimeGlobals.initializeSharing,\n    req: [RuntimeGlobals.initializeSharing],\n    type: \"function\",\n    assign: true\n  }\n};\n/* eslint-enable camelcase */\n\nclass APIPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"APIPlugin\", (compilation, _ref) => {\n      let {\n        normalModuleFactory\n      } = _ref;\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.chunkName).tap(\"APIPlugin\", chunk => {\n        compilation.addRuntimeModule(chunk, new ChunkNameRuntimeModule(chunk.name));\n        return true;\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.getFullHash).tap(\"APIPlugin\", (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new GetFullHashRuntimeModule());\n        return true;\n      });\n      /**\n       * @param {JavascriptParser} parser the parser\n       */\n\n      const handler = parser => {\n        Object.keys(REPLACEMENTS).forEach(key => {\n          const info = REPLACEMENTS[key];\n          parser.hooks.expression.for(key).tap(\"APIPlugin\", toConstantDependency(parser, info.expr, info.req));\n\n          if (info.assign === false) {\n            parser.hooks.assign.for(key).tap(\"APIPlugin\", expr => {\n              const err = new WebpackError(`${key} must not be assigned`);\n              err.loc = expr.loc;\n              throw err;\n            });\n          }\n\n          if (info.type) {\n            parser.hooks.evaluateTypeof.for(key).tap(\"APIPlugin\", evaluateToString(info.type));\n          }\n        });\n        parser.hooks.expression.for(\"__webpack_layer__\").tap(\"APIPlugin\", expr => {\n          const dep = new ConstDependency(JSON.stringify(parser.state.module.layer), expr.range);\n          dep.loc = expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateIdentifier.for(\"__webpack_layer__\").tap(\"APIPlugin\", expr => (parser.state.module.layer === null ? new BasicEvaluatedExpression().setNull() : new BasicEvaluatedExpression().setString(parser.state.module.layer)).setRange(expr.range));\n        parser.hooks.evaluateTypeof.for(\"__webpack_layer__\").tap(\"APIPlugin\", expr => new BasicEvaluatedExpression().setString(parser.state.module.layer === null ? \"object\" : \"string\").setRange(expr.range));\n        parser.hooks.expression.for(\"__webpack_module__.id\").tap(\"APIPlugin\", expr => {\n          parser.state.module.buildInfo.moduleConcatenationBailout = \"__webpack_module__.id\";\n          const dep = new ConstDependency(parser.state.module.moduleArgument + \".id\", expr.range, [RuntimeGlobals.moduleId]);\n          dep.loc = expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.expression.for(\"__webpack_module__\").tap(\"APIPlugin\", expr => {\n          parser.state.module.buildInfo.moduleConcatenationBailout = \"__webpack_module__\";\n          const dep = new ConstDependency(parser.state.module.moduleArgument, expr.range, [RuntimeGlobals.module]);\n          dep.loc = expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateTypeof.for(\"__webpack_module__\").tap(\"APIPlugin\", evaluateToString(\"object\"));\n      };\n\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"APIPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"APIPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/esm\").tap(\"APIPlugin\", handler);\n    });\n  }\n\n}\n\nmodule.exports = APIPlugin;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/APIPlugin.js"],"names":["RuntimeGlobals","require","WebpackError","ConstDependency","BasicEvaluatedExpression","toConstantDependency","evaluateToString","ChunkNameRuntimeModule","GetFullHashRuntimeModule","REPLACEMENTS","__webpack_require__","expr","req","type","assign","__webpack_public_path__","publicPath","__webpack_base_uri__","baseURI","__webpack_modules__","moduleFactories","__webpack_chunk_load__","ensureChunk","__non_webpack_require__","undefined","__webpack_nonce__","scriptNonce","__webpack_hash__","getFullHash","__webpack_chunkname__","chunkName","__webpack_get_script_filename__","getChunkScriptFilename","__webpack_runtime_id__","runtimeId","uncaughtErrorHandler","__system_context__","systemContext","__webpack_share_scopes__","shareScopeMap","__webpack_init_sharing__","initializeSharing","APIPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyTemplates","set","Template","runtimeRequirementInTree","for","chunk","addRuntimeModule","name","handler","parser","Object","keys","forEach","key","info","expression","err","loc","evaluateTypeof","dep","JSON","stringify","state","module","layer","range","addPresentationalDependency","evaluateIdentifier","setNull","setString","setRange","buildInfo","moduleConcatenationBailout","moduleArgument","moduleId","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"./RuntimeGlobals\");\nconst WebpackError = require(\"./WebpackError\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst BasicEvaluatedExpression = require(\"./javascript/BasicEvaluatedExpression\");\nconst {\n\ttoConstantDependency,\n\tevaluateToString\n} = require(\"./javascript/JavascriptParserHelpers\");\nconst ChunkNameRuntimeModule = require(\"./runtime/ChunkNameRuntimeModule\");\nconst GetFullHashRuntimeModule = require(\"./runtime/GetFullHashRuntimeModule\");\n\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n\n/* eslint-disable camelcase */\nconst REPLACEMENTS = {\n\t__webpack_require__: {\n\t\texpr: RuntimeGlobals.require,\n\t\treq: [RuntimeGlobals.require],\n\t\ttype: \"function\",\n\t\tassign: false\n\t},\n\t__webpack_public_path__: {\n\t\texpr: RuntimeGlobals.publicPath,\n\t\treq: [RuntimeGlobals.publicPath],\n\t\ttype: \"string\",\n\t\tassign: true\n\t},\n\t__webpack_base_uri__: {\n\t\texpr: RuntimeGlobals.baseURI,\n\t\treq: [RuntimeGlobals.baseURI],\n\t\ttype: \"string\",\n\t\tassign: true\n\t},\n\t__webpack_modules__: {\n\t\texpr: RuntimeGlobals.moduleFactories,\n\t\treq: [RuntimeGlobals.moduleFactories],\n\t\ttype: \"object\",\n\t\tassign: false\n\t},\n\t__webpack_chunk_load__: {\n\t\texpr: RuntimeGlobals.ensureChunk,\n\t\treq: [RuntimeGlobals.ensureChunk],\n\t\ttype: \"function\",\n\t\tassign: true\n\t},\n\t__non_webpack_require__: {\n\t\texpr: \"require\",\n\t\treq: null,\n\t\ttype: undefined, // type is not known, depends on environment\n\t\tassign: true\n\t},\n\t__webpack_nonce__: {\n\t\texpr: RuntimeGlobals.scriptNonce,\n\t\treq: [RuntimeGlobals.scriptNonce],\n\t\ttype: \"string\",\n\t\tassign: true\n\t},\n\t__webpack_hash__: {\n\t\texpr: `${RuntimeGlobals.getFullHash}()`,\n\t\treq: [RuntimeGlobals.getFullHash],\n\t\ttype: \"string\",\n\t\tassign: false\n\t},\n\t__webpack_chunkname__: {\n\t\texpr: RuntimeGlobals.chunkName,\n\t\treq: [RuntimeGlobals.chunkName],\n\t\ttype: \"string\",\n\t\tassign: false\n\t},\n\t__webpack_get_script_filename__: {\n\t\texpr: RuntimeGlobals.getChunkScriptFilename,\n\t\treq: [RuntimeGlobals.getChunkScriptFilename],\n\t\ttype: \"function\",\n\t\tassign: true\n\t},\n\t__webpack_runtime_id__: {\n\t\texpr: RuntimeGlobals.runtimeId,\n\t\treq: [RuntimeGlobals.runtimeId],\n\t\tassign: false\n\t},\n\t\"require.onError\": {\n\t\texpr: RuntimeGlobals.uncaughtErrorHandler,\n\t\treq: [RuntimeGlobals.uncaughtErrorHandler],\n\t\ttype: undefined, // type is not known, could be function or undefined\n\t\tassign: true // is never a pattern\n\t},\n\t__system_context__: {\n\t\texpr: RuntimeGlobals.systemContext,\n\t\treq: [RuntimeGlobals.systemContext],\n\t\ttype: \"object\",\n\t\tassign: false\n\t},\n\t__webpack_share_scopes__: {\n\t\texpr: RuntimeGlobals.shareScopeMap,\n\t\treq: [RuntimeGlobals.shareScopeMap],\n\t\ttype: \"object\",\n\t\tassign: false\n\t},\n\t__webpack_init_sharing__: {\n\t\texpr: RuntimeGlobals.initializeSharing,\n\t\treq: [RuntimeGlobals.initializeSharing],\n\t\ttype: \"function\",\n\t\tassign: true\n\t}\n};\n/* eslint-enable camelcase */\n\nclass APIPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"APIPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tConstDependency,\n\t\t\t\t\tnew ConstDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.chunkName)\n\t\t\t\t\t.tap(\"APIPlugin\", chunk => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\tnew ChunkNameRuntimeModule(chunk.name)\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.getFullHash)\n\t\t\t\t\t.tap(\"APIPlugin\", (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(chunk, new GetFullHashRuntimeModule());\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * @param {JavascriptParser} parser the parser\n\t\t\t\t */\n\t\t\t\tconst handler = parser => {\n\t\t\t\t\tObject.keys(REPLACEMENTS).forEach(key => {\n\t\t\t\t\t\tconst info = REPLACEMENTS[key];\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\t\"APIPlugin\",\n\t\t\t\t\t\t\t\ttoConstantDependency(parser, info.expr, info.req)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tif (info.assign === false) {\n\t\t\t\t\t\t\tparser.hooks.assign.for(key).tap(\"APIPlugin\", expr => {\n\t\t\t\t\t\t\t\tconst err = new WebpackError(`${key} must not be assigned`);\n\t\t\t\t\t\t\t\terr.loc = expr.loc;\n\t\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (info.type) {\n\t\t\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t\t.tap(\"APIPlugin\", evaluateToString(info.type));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"__webpack_layer__\")\n\t\t\t\t\t\t.tap(\"APIPlugin\", expr => {\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tJSON.stringify(parser.state.module.layer),\n\t\t\t\t\t\t\t\texpr.range\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t.for(\"__webpack_layer__\")\n\t\t\t\t\t\t.tap(\"APIPlugin\", expr =>\n\t\t\t\t\t\t\t(parser.state.module.layer === null\n\t\t\t\t\t\t\t\t? new BasicEvaluatedExpression().setNull()\n\t\t\t\t\t\t\t\t: new BasicEvaluatedExpression().setString(\n\t\t\t\t\t\t\t\t\t\tparser.state.module.layer\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t).setRange(expr.range)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"__webpack_layer__\")\n\t\t\t\t\t\t.tap(\"APIPlugin\", expr =>\n\t\t\t\t\t\t\tnew BasicEvaluatedExpression()\n\t\t\t\t\t\t\t\t.setString(\n\t\t\t\t\t\t\t\t\tparser.state.module.layer === null ? \"object\" : \"string\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.setRange(expr.range)\n\t\t\t\t\t\t);\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"__webpack_module__.id\")\n\t\t\t\t\t\t.tap(\"APIPlugin\", expr => {\n\t\t\t\t\t\t\tparser.state.module.buildInfo.moduleConcatenationBailout =\n\t\t\t\t\t\t\t\t\"__webpack_module__.id\";\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tparser.state.module.moduleArgument + \".id\",\n\t\t\t\t\t\t\t\texpr.range,\n\t\t\t\t\t\t\t\t[RuntimeGlobals.moduleId]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"__webpack_module__\")\n\t\t\t\t\t\t.tap(\"APIPlugin\", expr => {\n\t\t\t\t\t\t\tparser.state.module.buildInfo.moduleConcatenationBailout =\n\t\t\t\t\t\t\t\t\"__webpack_module__\";\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tparser.state.module.moduleArgument,\n\t\t\t\t\t\t\t\texpr.range,\n\t\t\t\t\t\t\t\t[RuntimeGlobals.module]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"__webpack_module__\")\n\t\t\t\t\t\t.tap(\"APIPlugin\", evaluateToString(\"object\"));\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"APIPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"APIPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/esm\")\n\t\t\t\t\t.tap(\"APIPlugin\", handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = APIPlugin;\n"]},"metadata":{},"sourceType":"script"}