{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\n\nconst Template = require(\"../Template\");\n\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n\nclass AsyncModuleRuntimeModule extends HelperRuntimeModule {\n  constructor() {\n    super(\"async module\");\n  }\n  /**\n   * @returns {string} runtime code\n   */\n\n\n  generate() {\n    const {\n      runtimeTemplate\n    } = this.compilation;\n    const fn = RuntimeGlobals.asyncModule;\n    return Template.asString(['var webpackThen = typeof Symbol === \"function\" ? Symbol(\"webpack then\") : \"__webpack_then__\";', 'var webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";', 'var webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";', `var completeQueue = ${runtimeTemplate.basicFunction(\"queue\", [\"if(queue) {\", Template.indent([`queue.forEach(${runtimeTemplate.expressionFunction(\"fn.r--\", \"fn\")});`, `queue.forEach(${runtimeTemplate.expressionFunction(\"fn.r-- ? fn.r++ : fn()\", \"fn\")});`]), \"}\"])}`, `var completeFunction = ${runtimeTemplate.expressionFunction(\"!--fn.r && fn()\", \"fn\")};`, `var queueFunction = ${runtimeTemplate.expressionFunction(\"queue ? queue.push(fn) : completeFunction(fn)\", \"queue, fn\")};`, `var wrapDeps = ${runtimeTemplate.returningFunction(`deps.map(${runtimeTemplate.basicFunction(\"dep\", ['if(dep !== null && typeof dep === \"object\") {', Template.indent([\"if(dep[webpackThen]) return dep;\", \"if(dep.then) {\", Template.indent([\"var queue = [];\", `dep.then(${runtimeTemplate.basicFunction(\"r\", [\"obj[webpackExports] = r;\", \"completeQueue(queue);\", \"queue = 0;\"])}, ${runtimeTemplate.basicFunction(\"e\", [\"obj[webpackError] = e;\", \"completeQueue(queue);\", \"queue = 0;\"])});`, \"var obj = {};\", `obj[webpackThen] = ${runtimeTemplate.expressionFunction(\"queueFunction(queue, fn), dep['catch'](reject)\", \"fn, reject\")};`, \"return obj;\"]), \"}\"]), \"}\", \"var ret = {};\", `ret[webpackThen] = ${runtimeTemplate.expressionFunction(\"completeFunction(fn)\", \"fn\")};`, \"ret[webpackExports] = dep;\", \"return ret;\"])})`, \"deps\")};`, `${fn} = ${runtimeTemplate.basicFunction(\"module, body, hasAwait\", [\"var queue = hasAwait && [];\", \"var exports = module.exports;\", \"var currentDeps;\", \"var outerResolve;\", \"var reject;\", \"var isEvaluating = true;\", \"var nested = false;\", `var whenAll = ${runtimeTemplate.basicFunction(\"deps, onResolve, onReject\", [\"if (nested) return;\", \"nested = true;\", \"onResolve.r += deps.length;\", `deps.map(${runtimeTemplate.expressionFunction(\"dep[webpackThen](onResolve, onReject)\", \"dep, i\")});`, \"nested = false;\"])};`, `var promise = new Promise(${runtimeTemplate.basicFunction(\"resolve, rej\", [\"reject = rej;\", `outerResolve = ${runtimeTemplate.expressionFunction(\"resolve(exports), completeQueue(queue), queue = 0\")};`])});`, \"promise[webpackExports] = exports;\", `promise[webpackThen] = ${runtimeTemplate.basicFunction(\"fn, rejectFn\", [\"if (isEvaluating) { return completeFunction(fn); }\", \"if (currentDeps) whenAll(currentDeps, fn, rejectFn);\", \"queueFunction(queue, fn);\", \"promise['catch'](rejectFn);\"])};`, \"module.exports = promise;\", `body(${runtimeTemplate.basicFunction(\"deps\", [\"currentDeps = wrapDeps(deps);\", \"var fn;\", `var getResult = ${runtimeTemplate.returningFunction(`currentDeps.map(${runtimeTemplate.basicFunction(\"d\", [\"if(d[webpackError]) throw d[webpackError];\", \"return d[webpackExports];\"])})`)}`, `var promise = new Promise(${runtimeTemplate.basicFunction(\"resolve, reject\", [`fn = ${runtimeTemplate.expressionFunction(\"resolve(getResult)\")};`, \"fn.r = 0;\", \"whenAll(currentDeps, fn, reject);\"])});`, \"return fn.r ? promise : getResult();\"])}, ${runtimeTemplate.expressionFunction(\"err && reject(promise[webpackError] = err), outerResolve()\", \"err\")});`, \"isEvaluating = false;\"])};`]);\n  }\n\n}\n\nmodule.exports = AsyncModuleRuntimeModule;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/runtime/AsyncModuleRuntimeModule.js"],"names":["RuntimeGlobals","require","Template","HelperRuntimeModule","AsyncModuleRuntimeModule","constructor","generate","runtimeTemplate","compilation","fn","asyncModule","asString","basicFunction","indent","expressionFunction","returningFunction","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n\nclass AsyncModuleRuntimeModule extends HelperRuntimeModule {\n\tconstructor() {\n\t\tsuper(\"async module\");\n\t}\n\n\t/**\n\t * @returns {string} runtime code\n\t */\n\tgenerate() {\n\t\tconst { runtimeTemplate } = this.compilation;\n\t\tconst fn = RuntimeGlobals.asyncModule;\n\t\treturn Template.asString([\n\t\t\t'var webpackThen = typeof Symbol === \"function\" ? Symbol(\"webpack then\") : \"__webpack_then__\";',\n\t\t\t'var webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";',\n\t\t\t'var webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";',\n\t\t\t`var completeQueue = ${runtimeTemplate.basicFunction(\"queue\", [\n\t\t\t\t\"if(queue) {\",\n\t\t\t\tTemplate.indent([\n\t\t\t\t\t`queue.forEach(${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\"fn.r--\",\n\t\t\t\t\t\t\"fn\"\n\t\t\t\t\t)});`,\n\t\t\t\t\t`queue.forEach(${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\"fn.r-- ? fn.r++ : fn()\",\n\t\t\t\t\t\t\"fn\"\n\t\t\t\t\t)});`\n\t\t\t\t]),\n\t\t\t\t\"}\"\n\t\t\t])}`,\n\t\t\t`var completeFunction = ${runtimeTemplate.expressionFunction(\n\t\t\t\t\"!--fn.r && fn()\",\n\t\t\t\t\"fn\"\n\t\t\t)};`,\n\t\t\t`var queueFunction = ${runtimeTemplate.expressionFunction(\n\t\t\t\t\"queue ? queue.push(fn) : completeFunction(fn)\",\n\t\t\t\t\"queue, fn\"\n\t\t\t)};`,\n\t\t\t`var wrapDeps = ${runtimeTemplate.returningFunction(\n\t\t\t\t`deps.map(${runtimeTemplate.basicFunction(\"dep\", [\n\t\t\t\t\t'if(dep !== null && typeof dep === \"object\") {',\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"if(dep[webpackThen]) return dep;\",\n\t\t\t\t\t\t\"if(dep.then) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"var queue = [];\",\n\t\t\t\t\t\t\t`dep.then(${runtimeTemplate.basicFunction(\"r\", [\n\t\t\t\t\t\t\t\t\"obj[webpackExports] = r;\",\n\t\t\t\t\t\t\t\t\"completeQueue(queue);\",\n\t\t\t\t\t\t\t\t\"queue = 0;\"\n\t\t\t\t\t\t\t])}, ${runtimeTemplate.basicFunction(\"e\", [\n\t\t\t\t\t\t\t\t\"obj[webpackError] = e;\",\n\t\t\t\t\t\t\t\t\"completeQueue(queue);\",\n\t\t\t\t\t\t\t\t\"queue = 0;\"\n\t\t\t\t\t\t\t])});`,\n\t\t\t\t\t\t\t\"var obj = {};\",\n\t\t\t\t\t\t\t`obj[webpackThen] = ${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\t\t\"queueFunction(queue, fn), dep['catch'](reject)\",\n\t\t\t\t\t\t\t\t\"fn, reject\"\n\t\t\t\t\t\t\t)};`,\n\t\t\t\t\t\t\t\"return obj;\"\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t]),\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"var ret = {};\",\n\t\t\t\t\t`ret[webpackThen] = ${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\"completeFunction(fn)\",\n\t\t\t\t\t\t\"fn\"\n\t\t\t\t\t)};`,\n\t\t\t\t\t\"ret[webpackExports] = dep;\",\n\t\t\t\t\t\"return ret;\"\n\t\t\t\t])})`,\n\t\t\t\t\"deps\"\n\t\t\t)};`,\n\t\t\t`${fn} = ${runtimeTemplate.basicFunction(\"module, body, hasAwait\", [\n\t\t\t\t\"var queue = hasAwait && [];\",\n\t\t\t\t\"var exports = module.exports;\",\n\t\t\t\t\"var currentDeps;\",\n\t\t\t\t\"var outerResolve;\",\n\t\t\t\t\"var reject;\",\n\t\t\t\t\"var isEvaluating = true;\",\n\t\t\t\t\"var nested = false;\",\n\t\t\t\t`var whenAll = ${runtimeTemplate.basicFunction(\n\t\t\t\t\t\"deps, onResolve, onReject\",\n\t\t\t\t\t[\n\t\t\t\t\t\t\"if (nested) return;\",\n\t\t\t\t\t\t\"nested = true;\",\n\t\t\t\t\t\t\"onResolve.r += deps.length;\",\n\t\t\t\t\t\t`deps.map(${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\t\"dep[webpackThen](onResolve, onReject)\",\n\t\t\t\t\t\t\t\"dep, i\"\n\t\t\t\t\t\t)});`,\n\t\t\t\t\t\t\"nested = false;\"\n\t\t\t\t\t]\n\t\t\t\t)};`,\n\t\t\t\t`var promise = new Promise(${runtimeTemplate.basicFunction(\n\t\t\t\t\t\"resolve, rej\",\n\t\t\t\t\t[\n\t\t\t\t\t\t\"reject = rej;\",\n\t\t\t\t\t\t`outerResolve = ${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\t\"resolve(exports), completeQueue(queue), queue = 0\"\n\t\t\t\t\t\t)};`\n\t\t\t\t\t]\n\t\t\t\t)});`,\n\t\t\t\t\"promise[webpackExports] = exports;\",\n\t\t\t\t`promise[webpackThen] = ${runtimeTemplate.basicFunction(\n\t\t\t\t\t\"fn, rejectFn\",\n\t\t\t\t\t[\n\t\t\t\t\t\t\"if (isEvaluating) { return completeFunction(fn); }\",\n\t\t\t\t\t\t\"if (currentDeps) whenAll(currentDeps, fn, rejectFn);\",\n\t\t\t\t\t\t\"queueFunction(queue, fn);\",\n\t\t\t\t\t\t\"promise['catch'](rejectFn);\"\n\t\t\t\t\t]\n\t\t\t\t)};`,\n\t\t\t\t\"module.exports = promise;\",\n\t\t\t\t`body(${runtimeTemplate.basicFunction(\"deps\", [\n\t\t\t\t\t\"currentDeps = wrapDeps(deps);\",\n\t\t\t\t\t\"var fn;\",\n\t\t\t\t\t`var getResult = ${runtimeTemplate.returningFunction(\n\t\t\t\t\t\t`currentDeps.map(${runtimeTemplate.basicFunction(\"d\", [\n\t\t\t\t\t\t\t\"if(d[webpackError]) throw d[webpackError];\",\n\t\t\t\t\t\t\t\"return d[webpackExports];\"\n\t\t\t\t\t\t])})`\n\t\t\t\t\t)}`,\n\t\t\t\t\t`var promise = new Promise(${runtimeTemplate.basicFunction(\n\t\t\t\t\t\t\"resolve, reject\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t`fn = ${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\t\t\t\"resolve(getResult)\"\n\t\t\t\t\t\t\t)};`,\n\t\t\t\t\t\t\t\"fn.r = 0;\",\n\t\t\t\t\t\t\t\"whenAll(currentDeps, fn, reject);\"\n\t\t\t\t\t\t]\n\t\t\t\t\t)});`,\n\t\t\t\t\t\"return fn.r ? promise : getResult();\"\n\t\t\t\t])}, ${runtimeTemplate.expressionFunction(\n\t\t\t\t\t\"err && reject(promise[webpackError] = err), outerResolve()\",\n\t\t\t\t\t\"err\"\n\t\t\t\t)});`,\n\t\t\t\t\"isEvaluating = false;\"\n\t\t\t])};`\n\t\t]);\n\t}\n}\n\nmodule.exports = AsyncModuleRuntimeModule;\n"]},"metadata":{},"sourceType":"script"}