{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Joel Denning @joeldenning\n*/\n\"use strict\";\n\nconst {\n  ConcatSource\n} = require(\"webpack-sources\");\n\nconst {\n  UsageState\n} = require(\"../ExportsInfo\");\n\nconst ExternalModule = require(\"../ExternalModule\");\n\nconst Template = require(\"../Template\");\n\nconst propertyAccess = require(\"../util/propertyAccess\");\n\nconst AbstractLibraryPlugin = require(\"./AbstractLibraryPlugin\");\n/** @typedef {import(\"webpack-sources\").Source} Source */\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryOptions} LibraryOptions */\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryType} LibraryType */\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n\n/** @typedef {import(\"../Compilation\").ChunkHashContext} ChunkHashContext */\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/** @typedef {import(\"../javascript/JavascriptModulesPlugin\").RenderContext} RenderContext */\n\n/** @typedef {import(\"../util/Hash\")} Hash */\n\n/** @template T @typedef {import(\"./AbstractLibraryPlugin\").LibraryContext<T>} LibraryContext<T> */\n\n/**\n * @typedef {Object} SystemLibraryPluginOptions\n * @property {LibraryType} type\n */\n\n/**\n * @typedef {Object} SystemLibraryPluginParsed\n * @property {string} name\n */\n\n/**\n * @typedef {SystemLibraryPluginParsed} T\n * @extends {AbstractLibraryPlugin<SystemLibraryPluginParsed>}\n */\n\n\nclass SystemLibraryPlugin extends AbstractLibraryPlugin {\n  /**\n   * @param {SystemLibraryPluginOptions} options the plugin options\n   */\n  constructor(options) {\n    super({\n      pluginName: \"SystemLibraryPlugin\",\n      type: options.type\n    });\n  }\n  /**\n   * @param {LibraryOptions} library normalized library option\n   * @returns {T | false} preprocess as needed by overriding\n   */\n\n\n  parseOptions(library) {\n    const {\n      name\n    } = library;\n\n    if (name && typeof name !== \"string\") {\n      throw new Error(`System.js library name must be a simple string or unset. ${AbstractLibraryPlugin.COMMON_LIBRARY_NAME_MESSAGE}`);\n    }\n\n    return {\n      name:\n      /** @type {string=} */\n      name\n    };\n  }\n  /**\n   * @param {Source} source source\n   * @param {RenderContext} renderContext render context\n   * @param {LibraryContext<T>} libraryContext context\n   * @returns {Source} source with library export\n   */\n\n\n  render(source, _ref, _ref2) {\n    let {\n      chunkGraph,\n      moduleGraph,\n      chunk\n    } = _ref;\n    let {\n      options,\n      compilation\n    } = _ref2;\n    const modules = chunkGraph.getChunkModules(chunk).filter(m => m instanceof ExternalModule && m.externalType === \"system\");\n    const externals =\n    /** @type {ExternalModule[]} */\n    modules; // The name this bundle should be registered as with System\n\n    const name = options.name ? `${JSON.stringify(compilation.getPath(options.name, {\n      chunk\n    }))}, ` : \"\"; // The array of dependencies that are external to webpack and will be provided by System\n\n    const systemDependencies = JSON.stringify(externals.map(m => typeof m.request === \"object\" && !Array.isArray(m.request) ? m.request.amd : m.request)); // The name of the variable provided by System for exporting\n\n    const dynamicExport = \"__WEBPACK_DYNAMIC_EXPORT__\"; // An array of the internal variable names for the webpack externals\n\n    const externalWebpackNames = externals.map(m => `__WEBPACK_EXTERNAL_MODULE_${Template.toIdentifier(`${chunkGraph.getModuleId(m)}`)}__`); // Declaring variables for the internal variable names for the webpack externals\n\n    const externalVarDeclarations = externalWebpackNames.map(name => `var ${name} = {};`).join(\"\\n\"); // Define __esModule flag on all internal variables and helpers\n\n    const externalVarInitialization = []; // The system.register format requires an array of setter functions for externals.\n\n    const setters = externalWebpackNames.length === 0 ? \"\" : Template.asString([\"setters: [\", Template.indent(externals.map((module, i) => {\n      const external = externalWebpackNames[i];\n      const exportsInfo = moduleGraph.getExportsInfo(module);\n      const otherUnused = exportsInfo.otherExportsInfo.getUsed(chunk.runtime) === UsageState.Unused;\n      const instructions = [];\n      const handledNames = [];\n\n      for (const exportInfo of exportsInfo.orderedExports) {\n        const used = exportInfo.getUsedName(undefined, chunk.runtime);\n\n        if (used) {\n          if (otherUnused || used !== exportInfo.name) {\n            instructions.push(`${external}${propertyAccess([used])} = module${propertyAccess([exportInfo.name])};`);\n            handledNames.push(exportInfo.name);\n          }\n        } else {\n          handledNames.push(exportInfo.name);\n        }\n      }\n\n      if (!otherUnused) {\n        if (!Array.isArray(module.request) || module.request.length === 1) {\n          externalVarInitialization.push(`Object.defineProperty(${external}, \"__esModule\", { value: true });`);\n        }\n\n        if (handledNames.length > 0) {\n          const name = `${external}handledNames`;\n          externalVarInitialization.push(`var ${name} = ${JSON.stringify(handledNames)};`);\n          instructions.push(Template.asString([\"Object.keys(module).forEach(function(key) {\", Template.indent([`if(${name}.indexOf(key) >= 0)`, Template.indent(`${external}[key] = module[key];`)]), \"});\"]));\n        } else {\n          instructions.push(Template.asString([\"Object.keys(module).forEach(function(key) {\", Template.indent([`${external}[key] = module[key];`]), \"});\"]));\n        }\n      }\n\n      if (instructions.length === 0) return \"function() {}\";\n      return Template.asString([\"function(module) {\", Template.indent(instructions), \"}\"]);\n    }).join(\",\\n\")), \"],\"]);\n    return new ConcatSource(Template.asString([`System.register(${name}${systemDependencies}, function(${dynamicExport}, __system_context__) {`, Template.indent([externalVarDeclarations, Template.asString(externalVarInitialization), \"return {\", Template.indent([setters, \"execute: function() {\", Template.indent(`${dynamicExport}(`)])]), \"\"]), source, Template.asString([\"\", Template.indent([Template.indent([Template.indent([\");\"]), \"}\"]), \"};\"]), \"})\"]));\n  }\n  /**\n   * @param {Chunk} chunk the chunk\n   * @param {Hash} hash hash\n   * @param {ChunkHashContext} chunkHashContext chunk hash context\n   * @param {LibraryContext<T>} libraryContext context\n   * @returns {void}\n   */\n\n\n  chunkHash(chunk, hash, chunkHashContext, _ref3) {\n    let {\n      options,\n      compilation\n    } = _ref3;\n    hash.update(\"SystemLibraryPlugin\");\n\n    if (options.name) {\n      hash.update(compilation.getPath(options.name, {\n        chunk\n      }));\n    }\n  }\n\n}\n\nmodule.exports = SystemLibraryPlugin;","map":{"version":3,"sources":["G:/0_coding/Side Project/photo-website/node_modules/webpack/lib/library/SystemLibraryPlugin.js"],"names":["ConcatSource","require","UsageState","ExternalModule","Template","propertyAccess","AbstractLibraryPlugin","SystemLibraryPlugin","constructor","options","pluginName","type","parseOptions","library","name","Error","COMMON_LIBRARY_NAME_MESSAGE","render","source","chunkGraph","moduleGraph","chunk","compilation","modules","getChunkModules","filter","m","externalType","externals","JSON","stringify","getPath","systemDependencies","map","request","Array","isArray","amd","dynamicExport","externalWebpackNames","toIdentifier","getModuleId","externalVarDeclarations","join","externalVarInitialization","setters","length","asString","indent","module","i","external","exportsInfo","getExportsInfo","otherUnused","otherExportsInfo","getUsed","runtime","Unused","instructions","handledNames","exportInfo","orderedExports","used","getUsedName","undefined","push","chunkHash","hash","chunkHashContext","update","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Joel Denning @joeldenning\n*/\n\n\"use strict\";\n\nconst { ConcatSource } = require(\"webpack-sources\");\nconst { UsageState } = require(\"../ExportsInfo\");\nconst ExternalModule = require(\"../ExternalModule\");\nconst Template = require(\"../Template\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst AbstractLibraryPlugin = require(\"./AbstractLibraryPlugin\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryOptions} LibraryOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryType} LibraryType */\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compilation\").ChunkHashContext} ChunkHashContext */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../javascript/JavascriptModulesPlugin\").RenderContext} RenderContext */\n/** @typedef {import(\"../util/Hash\")} Hash */\n/** @template T @typedef {import(\"./AbstractLibraryPlugin\").LibraryContext<T>} LibraryContext<T> */\n\n/**\n * @typedef {Object} SystemLibraryPluginOptions\n * @property {LibraryType} type\n */\n\n/**\n * @typedef {Object} SystemLibraryPluginParsed\n * @property {string} name\n */\n\n/**\n * @typedef {SystemLibraryPluginParsed} T\n * @extends {AbstractLibraryPlugin<SystemLibraryPluginParsed>}\n */\nclass SystemLibraryPlugin extends AbstractLibraryPlugin {\n\t/**\n\t * @param {SystemLibraryPluginOptions} options the plugin options\n\t */\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpluginName: \"SystemLibraryPlugin\",\n\t\t\ttype: options.type\n\t\t});\n\t}\n\n\t/**\n\t * @param {LibraryOptions} library normalized library option\n\t * @returns {T | false} preprocess as needed by overriding\n\t */\n\tparseOptions(library) {\n\t\tconst { name } = library;\n\t\tif (name && typeof name !== \"string\") {\n\t\t\tthrow new Error(\n\t\t\t\t`System.js library name must be a simple string or unset. ${AbstractLibraryPlugin.COMMON_LIBRARY_NAME_MESSAGE}`\n\t\t\t);\n\t\t}\n\t\treturn {\n\t\t\tname: /** @type {string=} */ (name)\n\t\t};\n\t}\n\n\t/**\n\t * @param {Source} source source\n\t * @param {RenderContext} renderContext render context\n\t * @param {LibraryContext<T>} libraryContext context\n\t * @returns {Source} source with library export\n\t */\n\trender(source, { chunkGraph, moduleGraph, chunk }, { options, compilation }) {\n\t\tconst modules = chunkGraph\n\t\t\t.getChunkModules(chunk)\n\t\t\t.filter(m => m instanceof ExternalModule && m.externalType === \"system\");\n\t\tconst externals = /** @type {ExternalModule[]} */ (modules);\n\n\t\t// The name this bundle should be registered as with System\n\t\tconst name = options.name\n\t\t\t? `${JSON.stringify(compilation.getPath(options.name, { chunk }))}, `\n\t\t\t: \"\";\n\n\t\t// The array of dependencies that are external to webpack and will be provided by System\n\t\tconst systemDependencies = JSON.stringify(\n\t\t\texternals.map(m =>\n\t\t\t\ttypeof m.request === \"object\" && !Array.isArray(m.request)\n\t\t\t\t\t? m.request.amd\n\t\t\t\t\t: m.request\n\t\t\t)\n\t\t);\n\n\t\t// The name of the variable provided by System for exporting\n\t\tconst dynamicExport = \"__WEBPACK_DYNAMIC_EXPORT__\";\n\n\t\t// An array of the internal variable names for the webpack externals\n\t\tconst externalWebpackNames = externals.map(\n\t\t\tm =>\n\t\t\t\t`__WEBPACK_EXTERNAL_MODULE_${Template.toIdentifier(\n\t\t\t\t\t`${chunkGraph.getModuleId(m)}`\n\t\t\t\t)}__`\n\t\t);\n\n\t\t// Declaring variables for the internal variable names for the webpack externals\n\t\tconst externalVarDeclarations = externalWebpackNames\n\t\t\t.map(name => `var ${name} = {};`)\n\t\t\t.join(\"\\n\");\n\n\t\t// Define __esModule flag on all internal variables and helpers\n\t\tconst externalVarInitialization = [];\n\n\t\t// The system.register format requires an array of setter functions for externals.\n\t\tconst setters =\n\t\t\texternalWebpackNames.length === 0\n\t\t\t\t? \"\"\n\t\t\t\t: Template.asString([\n\t\t\t\t\t\t\"setters: [\",\n\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\texternals\n\t\t\t\t\t\t\t\t.map((module, i) => {\n\t\t\t\t\t\t\t\t\tconst external = externalWebpackNames[i];\n\t\t\t\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n\t\t\t\t\t\t\t\t\tconst otherUnused =\n\t\t\t\t\t\t\t\t\t\texportsInfo.otherExportsInfo.getUsed(chunk.runtime) ===\n\t\t\t\t\t\t\t\t\t\tUsageState.Unused;\n\t\t\t\t\t\t\t\t\tconst instructions = [];\n\t\t\t\t\t\t\t\t\tconst handledNames = [];\n\t\t\t\t\t\t\t\t\tfor (const exportInfo of exportsInfo.orderedExports) {\n\t\t\t\t\t\t\t\t\t\tconst used = exportInfo.getUsedName(\n\t\t\t\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\t\t\t\tchunk.runtime\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tif (used) {\n\t\t\t\t\t\t\t\t\t\t\tif (otherUnused || used !== exportInfo.name) {\n\t\t\t\t\t\t\t\t\t\t\t\tinstructions.push(\n\t\t\t\t\t\t\t\t\t\t\t\t\t`${external}${propertyAccess([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tused\n\t\t\t\t\t\t\t\t\t\t\t\t\t])} = module${propertyAccess([exportInfo.name])};`\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\thandledNames.push(exportInfo.name);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\thandledNames.push(exportInfo.name);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (!otherUnused) {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t!Array.isArray(module.request) ||\n\t\t\t\t\t\t\t\t\t\t\tmodule.request.length === 1\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\texternalVarInitialization.push(\n\t\t\t\t\t\t\t\t\t\t\t\t`Object.defineProperty(${external}, \"__esModule\", { value: true });`\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (handledNames.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tconst name = `${external}handledNames`;\n\t\t\t\t\t\t\t\t\t\t\texternalVarInitialization.push(\n\t\t\t\t\t\t\t\t\t\t\t\t`var ${name} = ${JSON.stringify(handledNames)};`\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tinstructions.push(\n\t\t\t\t\t\t\t\t\t\t\t\tTemplate.asString([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Object.keys(module).forEach(function(key) {\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`if(${name}.indexOf(key) >= 0)`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent(`${external}[key] = module[key];`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"});\"\n\t\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tinstructions.push(\n\t\t\t\t\t\t\t\t\t\t\t\tTemplate.asString([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Object.keys(module).forEach(function(key) {\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([`${external}[key] = module[key];`]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"});\"\n\t\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (instructions.length === 0) return \"function() {}\";\n\t\t\t\t\t\t\t\t\treturn Template.asString([\n\t\t\t\t\t\t\t\t\t\t\"function(module) {\",\n\t\t\t\t\t\t\t\t\t\tTemplate.indent(instructions),\n\t\t\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.join(\",\\n\")\n\t\t\t\t\t\t),\n\t\t\t\t\t\t\"],\"\n\t\t\t\t  ]);\n\n\t\treturn new ConcatSource(\n\t\t\tTemplate.asString([\n\t\t\t\t`System.register(${name}${systemDependencies}, function(${dynamicExport}, __system_context__) {`,\n\t\t\t\tTemplate.indent([\n\t\t\t\t\texternalVarDeclarations,\n\t\t\t\t\tTemplate.asString(externalVarInitialization),\n\t\t\t\t\t\"return {\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\tsetters,\n\t\t\t\t\t\t\"execute: function() {\",\n\t\t\t\t\t\tTemplate.indent(`${dynamicExport}(`)\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\t\"\"\n\t\t\t]),\n\t\t\tsource,\n\t\t\tTemplate.asString([\n\t\t\t\t\"\",\n\t\t\t\tTemplate.indent([\n\t\t\t\t\tTemplate.indent([Template.indent([\");\"]), \"}\"]),\n\t\t\t\t\t\"};\"\n\t\t\t\t]),\n\t\t\t\t\"})\"\n\t\t\t])\n\t\t);\n\t}\n\n\t/**\n\t * @param {Chunk} chunk the chunk\n\t * @param {Hash} hash hash\n\t * @param {ChunkHashContext} chunkHashContext chunk hash context\n\t * @param {LibraryContext<T>} libraryContext context\n\t * @returns {void}\n\t */\n\tchunkHash(chunk, hash, chunkHashContext, { options, compilation }) {\n\t\thash.update(\"SystemLibraryPlugin\");\n\t\tif (options.name) {\n\t\t\thash.update(compilation.getPath(options.name, { chunk }));\n\t\t}\n\t}\n}\n\nmodule.exports = SystemLibraryPlugin;\n"]},"metadata":{},"sourceType":"script"}